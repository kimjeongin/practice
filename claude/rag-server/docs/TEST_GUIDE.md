# RAG MCP Server í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ¯ í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶• ì™„ë£Œ

í”„ë¡œì íŠ¸ì˜ í¬ê´„ì ì¸ í…ŒìŠ¤íŠ¸ í™˜ê²½ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ“ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
test/
â”œâ”€â”€ unit/                    # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ simple.test.ts      # ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ config.test.ts      # ì„¤ì • í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ utils.test.ts       # ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ documentService.test.ts  # ë¬¸ì„œ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (ì˜ì¡´ì„± ì´ìŠˆë¡œ ë³´ë¥˜)
â”‚   â””â”€â”€ searchService.test.ts    # ê²€ìƒ‰ ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (ì˜ì¡´ì„± ì´ìŠˆë¡œ ë³´ë¥˜)
â”œâ”€â”€ integration/             # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ simple-integration.test.ts  # ê°„ë‹¨í•œ í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ ragWorkflow.test.ts        # RAG ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸ (ë³µí•© ì˜ì¡´ì„±ìœ¼ë¡œ ë³´ë¥˜)
â”‚   â””â”€â”€ mcpServer.test.ts          # MCP ì„œë²„ í…ŒìŠ¤íŠ¸ (ë³µí•© ì˜ì¡´ì„±ìœ¼ë¡œ ë³´ë¥˜)
â”œâ”€â”€ e2e/                     # End-to-End í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ simple-e2e.test.ts         # ê°„ë‹¨í•œ E2E í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ fullApplication.test.ts    # ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸ (ë³µí•© ì˜ì¡´ì„±ìœ¼ë¡œ ë³´ë¥˜)
â”œâ”€â”€ fixtures/                # í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â””â”€â”€ sample-documents.ts  # ìƒ˜í”Œ ë¬¸ì„œ ë°ì´í„°
â”œâ”€â”€ helpers/                 # í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ testHelpers.ts      # í…ŒìŠ¤íŠ¸ í—¬í¼ í•¨ìˆ˜ë“¤
â”œâ”€â”€ setup.ts                # ì „ì—­ í…ŒìŠ¤íŠ¸ ì„¤ì •
â””â”€â”€ README.md               # í…ŒìŠ¤íŠ¸ ë¬¸ì„œ
```

## ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:unit

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:integration

# E2E í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
npm run test:e2e

# í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸
npm run test:coverage

# í…ŒìŠ¤íŠ¸ watch ëª¨ë“œ
npm run test:watch

# ìƒì„¸ ì¶œë ¥ ëª¨ë“œ
npm run test:verbose
```

### íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
```bash
# ë‹¨ì¼ í…ŒìŠ¤íŠ¸ íŒŒì¼ ì‹¤í–‰
npm test test/unit/simple.test.ts

# ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë™ì‹œ ì‹¤í–‰
npm test test/unit/simple.test.ts test/unit/config.test.ts
```

## âœ… í˜„ì¬ ì‘ë™í•˜ëŠ” í…ŒìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
- âœ… `simple.test.ts` - ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ (4ê°œ í…ŒìŠ¤íŠ¸)
- âœ… `config.test.ts` - ì„¤ì • í…ŒìŠ¤íŠ¸ (3ê°œ í…ŒìŠ¤íŠ¸)
- âœ… `utils.test.ts` - ìœ í‹¸ë¦¬í‹° í…ŒìŠ¤íŠ¸ (3ê°œ í…ŒìŠ¤íŠ¸)

### í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)
- âœ… `simple-integration.test.ts` - ê¸°ë³¸ í†µí•© í…ŒìŠ¤íŠ¸ (4ê°œ í…ŒìŠ¤íŠ¸)

### E2E í…ŒìŠ¤íŠ¸ (End-to-End Tests)
- âœ… `simple-e2e.test.ts` - ê¸°ë³¸ E2E í…ŒìŠ¤íŠ¸ (5ê°œ í…ŒìŠ¤íŠ¸)

**ì´ 19ê°œ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í•©ë‹ˆë‹¤.**

## âš ï¸ í˜„ì¬ ë³´ë¥˜ëœ í…ŒìŠ¤íŠ¸

ë‹¤ìŒ í…ŒìŠ¤íŠ¸ë“¤ì€ ë³µì¡í•œ ì˜ì¡´ì„± ë•Œë¬¸ì— í˜„ì¬ ë³´ë¥˜ ìƒíƒœì…ë‹ˆë‹¤:

- `documentService.test.ts` - LangChain ë° íŒŒì¼ ì‹œìŠ¤í…œ ì˜ì¡´ì„±
- `searchService.test.ts` - ë²¡í„° ìŠ¤í† ì–´ ë° ì„ë² ë”© ì˜ì¡´ì„±
- `ragWorkflow.test.ts` - ì „ì²´ RAG íŒŒì´í”„ë¼ì¸ ì˜ì¡´ì„±
- `mcpServer.test.ts` - MCP í”„ë¡œí† ì½œ ì˜ì¡´ì„±
- `fullApplication.test.ts` - ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¼ì´í”„ì‚¬ì´í´ ì˜ì¡´ì„±

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ ì„¤ì •

### Jest ì„¤ì • (`jest.config.js`)
- TypeScript ì§€ì›
- CommonJS ëª¨ë“œ (ESM í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°)
- í…ŒìŠ¤íŠ¸ íƒ€ì„ì•„ì›ƒ: 30ì´ˆ
- ì»¤ë²„ë¦¬ì§€ ìˆ˜ì§‘ ì„¤ì •
- í…ŒìŠ¤íŠ¸ í™˜ê²½: Node.js

### íŒ¨í‚¤ì§€ ì˜ì¡´ì„±
```json
{
  "devDependencies": {
    "jest": "^30.0.5",
    "@types/jest": "^30.0.0",
    "ts-jest": "^29.4.1",
    "supertest": "^7.1.4",
    "@types/supertest": "^6.0.3"
  }
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°

### Mock í—¬í¼ (`testHelpers.ts`)
- `createMockConfig()` - í…ŒìŠ¤íŠ¸ìš© ì„¤ì • ìƒì„±
- `createMockLogger()` - ë¡œê±° ëª¨í‚¹
- `createMockFile()` - í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
- `removeMockFile()` - í…ŒìŠ¤íŠ¸ íŒŒì¼ ì •ë¦¬
- `waitFor()` - ë¹„ë™ê¸° ëŒ€ê¸°
- `expectAsyncThrow()` - ë¹„ë™ê¸° ì—ëŸ¬ í…ŒìŠ¤íŠ¸

### í…ŒìŠ¤íŠ¸ ë°ì´í„° (`sample-documents.ts`)
- ë‹¤ì–‘í•œ í˜•íƒœì˜ ìƒ˜í”Œ ë¬¸ì„œ (í…ìŠ¤íŠ¸, ë§ˆí¬ë‹¤ìš´, ê¸´ ë¬¸ì„œ, ê¸°ìˆ  ë¬¸ì„œ)
- í…ŒìŠ¤íŠ¸ìš© ì²­í¬ ë°ì´í„°

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì˜ˆì‹œ

```
Test Suites: 3 passed, 3 total
Tests:       10 passed, 10 total
Snapshots:   0 total
Time:        0.343 s
```

## ğŸ”§ í–¥í›„ ê°œì„  ê³„íš

1. **ë³µì¡í•œ ì˜ì¡´ì„± í•´ê²°**
   - ëª¨í‚¹ ì „ëµ ê°œì„ 
   - ì˜ì¡´ì„± ì£¼ì… íŒ¨í„´ ì ìš©
   - í…ŒìŠ¤íŠ¸ ë”ë¸” í™œìš©

2. **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ**
   - í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - ì—ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ê°•í™”

3. **CI/CD í†µí•©**
   - GitHub Actions ì›Œí¬í”Œë¡œìš° ì¶”ê°€
   - ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

4. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**
   - ë²¤ì¹˜ë§ˆí‚¹ í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í…ŒìŠ¤íŠ¸

## ğŸ’¡ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œë¼ì¸

### í…ŒìŠ¤íŠ¸ ëª…ëª… ê·œì¹™
- `describe()`: í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ì»´í¬ë„ŒíŠ¸/ê¸°ëŠ¥
- `test()`: êµ¬ì²´ì ì¸ ë™ì‘ê³¼ ì˜ˆìƒ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ êµ¬ì¡° (AAA íŒ¨í„´)
```typescript
test('should do something specific', () => {
  // Arrange - ì¤€ë¹„
  const input = 'test input';
  
  // Act - ì‹¤í–‰
  const result = functionUnderTest(input);
  
  // Assert - ê²€ì¦
  expect(result).toBe('expected output');
});
```

### ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸
```typescript
test('should handle async operations', async () => {
  const result = await asyncFunction();
  expect(result).toBeDefined();
});
```

## ğŸ‰ ê²°ë¡ 

RAG MCP Serverì˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ì´ ì„±ê³µì ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ 19ê°œì˜ í…ŒìŠ¤íŠ¸ê°€ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, í–¥í›„ ë³µì¡í•œ ì˜ì¡´ì„±ì„ í•´ê²°í•˜ì—¬ ë” ë§ì€ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê¸°ë°˜ì´ ë§ˆë ¨ë˜ì—ˆìŠµë‹ˆë‹¤.

í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´:
```bash
npm run test:unit
npm run test:integration
npm run test:e2e
```