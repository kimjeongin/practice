# ========================================
# RAG MCP Server Environment Configuration
# ========================================

# ----------------------------------------
# Basic Configuration
# ----------------------------------------
NODE_ENV=development
DATA_DIR=./.data
DOCUMENTS_DIR=./documents
LOG_LEVEL=info

# ----------------------------------------
# Database
# ----------------------------------------
DATABASE_URL=file:./database.db

# ----------------------------------------
# Document Processing
# ----------------------------------------
CHUNK_SIZE=1024
CHUNK_OVERLAP=20
SIMILARITY_TOP_K=5
SIMILARITY_THRESHOLD=0.1

# ----------------------------------------
# Embedding Configuration
# ----------------------------------------
# Service: 'transformers' (local) or 'ollama' (external)
EMBEDDING_SERVICE=transformers
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSIONS=384
EMBEDDING_DEVICE=cpu
EMBEDDING_BATCH_SIZE=10
TRANSFORMERS_CACHE_DIR=./.data/.cache/transformers
TRANSFORMERS_LAZY_LOADING=false

# Ollama Configuration (if using EMBEDDING_SERVICE=ollama)
OLLAMA_BASE_URL=http://localhost:11434

# ----------------------------------------
# Vector Store Configuration
# ----------------------------------------
# Provider: 'lancedb' or 'qdrant'
VECTOR_STORE_PROVIDER=lancedb

# LanceDB Configuration
LANCEDB_URI=./.data/lancedb

# Qdrant Configuration (if using VECTOR_STORE_PROVIDER=qdrant)
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION=documents

# ----------------------------------------
# Processing Pipeline
# ----------------------------------------
MAX_CONCURRENT_PROCESSING=3
BATCH_SIZE=10
MAX_RETRIES=2
BASE_DELAY=1000
MAX_DELAY=5000

# ----------------------------------------
# Search Configuration
# ----------------------------------------
ENABLE_HYBRID_SEARCH=true
ENABLE_QUERY_REWRITING=false
SEMANTIC_WEIGHT=0.7
ENABLE_RERANKING=false

# Document processing handled automatically by VectorStore

# ----------------------------------------
# Model Migration
# ----------------------------------------
ENABLE_AUTO_MIGRATION=true
ENABLE_INCOMPATIBILITY_DETECTION=true
CLEAR_VECTORS_ON_MODEL_CHANGE=true
BACKUP_EMBEDDINGS_BEFORE_MIGRATION=false
MIGRATION_TIMEOUT=300000

# ----------------------------------------
# MCP Transport Configuration
# ----------------------------------------
# Transport: 'stdio' (default for development) or 'streamable-http'
MCP_TRANSPORT=streamable-http
MCP_PORT=3000
MCP_HOST=localhost
MCP_ENABLE_CORS=true
MCP_SESSION_TIMEOUT=300000
MCP_ALLOWED_ORIGINS=*
MCP_DNS_REBINDING_PROTECTION=false

